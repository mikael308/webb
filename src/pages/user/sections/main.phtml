<?php

use Web\Session\Security\Authorizer;

$reqUserName = getReqUser();
if (empty(trim($reqUserName))) {
    $authorizedUser = Authorizer::getAuthorizedUser();
    $url = \Web\pagelinkUser($authorizedUser);
    header("Location: " . $url);
    exit();
}

$view_user = Web\Database\Read::forumUserByName($reqUserName);
if ($view_user != null) {
    $subpage = getSubpage() != null ? getSubpage() : 'info';

    \Web\Framework\Factory\Widgets::addToPage($subpage, 'user');

} else {
    throw new \Exception("user was not found");
}
